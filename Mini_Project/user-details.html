<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>UserDetails</title>
    <style>
        p {
            /*width: 60vw;*/
            margin-bottom: 3px;
            margin-left: 10px;
            font-size: 25px;
            font-weight: 600;
            border-bottom: solid 2px black;
        }

        li {
            margin-bottom: 3px;
            font-size: 22px;
            font-weight: 300;
        }

    </style>
</head>
<body>

<script>
    // На сторінці user-details.html:
    // 4 Вивести всю, без виключення, інформацію про об'єкт user на який клікнули

    let url = new URL(location.href);
    let data = url.searchParams.get('data');
    let oData = JSON.parse(data);

    const div = document.createElement('div');
    div.classList.add('det');

    const ul = document.createElement('ul');
    ul.classList.add('list');

    const p = document.createElement('p');
    p.innerText = `User${oData.id} Details:`;

    div.append(p, ul);

    const clearData = data.replace(/[{}"]/g, '').replace(/:/g, ': ').split(',');

    for (const item of clearData) {
        const upLi = item.charAt(0).toUpperCase() + item.slice(1);
        const li = document.createElement('li');
        li.innerText = upLi;
        ul.appendChild(li);
    }
    document.body.appendChild(div);

    // 5 Додати кнопку "post of current user", при кліку на яку, з'являються title всіх постів поточного юзера
    //      (для отримання постів використовуйте ендпоінт https://jsonplaceholder.typicode.com/users/USER_ID/posts)

    let urlUser = new URL(`https://jsonplaceholder.typicode.com/posts?userId=` + oData.id);

    const block = document.createElement('div');
    block.classList.add('butn');

    const buttonPosts = document.createElement('button');
    buttonPosts.innerText = 'Post of current user';

    block.appendChild(buttonPosts);
    document.body.appendChild(block);



    buttonPosts.onclick = async function () {
        const block_2 = document.createElement('div');
        block_2.classList.add('posts');

        const ul_2 = document.createElement('ul');

        const p_2 = document.createElement('p');
        p_2.innerText = 'Posts';

        block_2.append(p_2, ul_2);
        document.body.appendChild(block_2);

        await fetch(urlUser)
            .then(res => res.json())
            .then(posts => {
                for (const post of posts) {
                    const upLi = post.title.charAt(0).toUpperCase() + post.title.slice(1);
                    const li = document.createElement('li');
                    // li.innerText = `"${post.title}"`;
                    li.innerText = `"${upLi}"`;
                    ul_2.appendChild(li);
                }
            });
    }

    // 6 Каждому посту додати кнопку/посилання, при кліку на яку відбувається перехід на сторінку post-details.html,
    //       котра має детальну інфу про поточний пост.


</script>
</body>
</html>
