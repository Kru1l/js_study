<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Post Details</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bruno+Ace+SC&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Bruno Ace SC', cursive;
        }
        button {
            font-family: 'Bruno Ace SC', cursive;
        }

        .par {
            /*width: 60vw;*/
            margin-bottom: 3px;
            margin-left: 10px;
            font-size: 25px;
            font-weight: 600;
            border-bottom: solid 2px black;
        }

        li {
            margin-bottom: 3px;
            font-size: 22px;
            font-weight: 300;
        }
    </style>
</head>
<body>


<script>
    // На сторінці post-details.html:
    // 7 Вивести всю, без виключення, інформацію про об'єкт post на який клікнули .

    let url = new URL(location.href);
    let data = url.searchParams.get('data');

    let oData = JSON.parse(data);

    const div = document.createElement('div');
    div.classList.add('det');

    const ul = document.createElement('ul');
    ul.classList.add('list');

    const p = document.createElement('p');
    p.classList.add('par');
    p.innerText = 'Post Details:';

    div.append(p, ul);

    const clearData = data.replace(/[{}"]/g, '').replace(/:/g, ': ').split(',');

    for (const item of clearData) {
        const upLi = item.charAt(0).toUpperCase() + item.slice(1) + ';';
        const li = document.createElement('li');
        li.innerText = upLi;
        ul.appendChild(li);
    }
    document.body.appendChild(div);

    // 8 Нижче інформаці про пост, вивести всі коментарі поточного поста (ендпоінт  - https://jsonplaceholder.typicode.com/posts/POST_ID/comments)

    let comments = new URL(`https://jsonplaceholder.typicode.com/posts/${oData.id}/comments`);
    fetch(comments)
        .then(res => res.json())
        .then(comments => {
            // const ul = document.createElement('ul');
            const p = document.createElement('p');
            p.classList.add('par');
            p.innerText = 'Comments:';

            div.appendChild(p);

            for (const comment of comments) {
                const div = document.createElement('div');
                const sComment = JSON.stringify(comment);
                const clearComment = sComment.replace(/[{}"]/g, '').replace(/:/g, ': ').split(',');

                for (const string of clearComment) {
                    const p = document.createElement('p');
                    p.innerText = string.charAt(0).toUpperCase() + string.slice(1) + ';';
                    div.appendChild(p);
                }
                document.body.append(div);
            }
        })
</script>
</body>
</html>
